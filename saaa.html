<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    
<title>Sign up</title>


<link href="style-two.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css" />

</head>
<body>

<div id="style2_wrapper">
	<div id="style2_top">
        <div id="style2_menu">
            <ul>
                <li><a href="index.html" class="current">Home</a></li>
                <li><a href="signupp.html">examinee form</a></li>
                <li><a href="exam.html">Entrance Exam</a></li>
                <li><a href="registerUser.html">register admin</a></li>
              
            </ul>    	
        </div> 
    </div>
 </div>


 <div>
        <!-- <form id="message_form" action="" method="post"> -->
                <form id="message_form">
                <input type="text" placeholder = "Firstname" id="fname" required>
                <input type="text" placeholder = "Lastname" id="lname" required>
                <input type="text" placeholder="Address" id="adrs" required>
                <input type="text" placeholder="Phone number" id="phn" required>
                <input id="inputFile" type="file"  required>
                <button class="sbtn" type="submit" onclick= 'myFunction11()' id="submit_form">Submit</button>
                <!-- <button type="submit" onclick= 'myFunction11()' class="sbtn" id="submit_form">Submit2</button>
                 -->
                
            </form>

            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"> </script>
            </div>
            <!-- ajax post -->
               
            <!-- <script type="text/javascript">

            function post_request() {
            var selectedFile = document.getElementById("inputFile").files;
                    if (selectedFile.length > 0) {
                    var fileToLoad = selectedFile[0];
                    var fileReader = new FileReader();
                    var base64;
                    fileReader.onload = function(fileLoadedEvent) {
                        base64 = fileLoadedEvent.target.result;
                        var xhr = new XMLHttpRequest();
                        console.log(base64);
                        
                        var params = JSON.stringify({
                        Records:{
                            Firstname: document.getElementById("fname").value,
                            Lastname: document.getElementById("lname").value,
                            Address: document.getElementById("adrs").value,
                            Phonenumber: document.getElementById("phn").value,
                            file: base64
                            }
                 });
                    xhr.open("POST", "https://ofhwk42qe9.execute-api.us-east-1.amazonaws.com/prod/carer_genese_personal_info_uploadtos3", true);  
                    xhr.setRequestHeader("Content-type", "application/json");
                    xhr.onreadystatechange = function(){
                        if(xhr.readyState === 4){
                            if(xhr.status === 200){
                                a = xhr.responseText;
                                b = JSON.parse(a);
                                console.log(b);
                                alert(b);
                                }
                            else{
                                alert("unable to send your data. Please check errors.");
                            }
                        }
                    };
                    xhr.send(params);
                    return false;
            
                 console.log(base64);
                };

                fileReader.readAsDataURL(fileToLoad);
                       }
                }
                (function() {
                    document.getElementById("message_form").onsubmit = function() {
                        
                        post_request();
                        
                        return false;
                    }
                })
                ();
                
                </script>
                
            </body>
            </html> -->
                


<!-- dynamic form -->



    function post_request() {
        console.log("Sundar");
    var selectedFile = document.getElementById("inputFile").files;
            if (selectedFile.length > 0) {
            var fileToLoad = selectedFile[0];
            var fileReader = new FileReader();
            var base64;
            fileReader.onload = function(fileLoadedEvent) {
                base64 = fileLoadedEvent.target.result;
                var xhr = new XMLHttpRequest();
                console.log(base64);
                
                var params = JSON.stringify({
                Records:{
                    Firstname: document.getElementById("fname").value,
                    Lastname: document.getElementById("lname").value,
                    Address: document.getElementById("adrs").value,
                    Phonenumber: document.getElementById("phn").value,
                    file: base64
                    }
         });
            xhr.open("POST", "https://ofhwk42qe9.execute-api.us-east-1.amazonaws.com/prod/carer_genese_personal_info_uploadtos3", true);  
            xhr.setRequestHeader("Content-type", "application/json");
            xhr.onreadystatechange = function(){
                if(xhr.readyState === 4){
                    if(xhr.status === 200){
                        a = xhr.responseText;
                        b = JSON.parse(a);
                        console.log(b);
                        alert(b);
                        }
                    else{
                        alert("unable to send your data. Please check errors.");
                    }
                }
            };
            xhr.send(params);
            return false;
    
         console.log(base64);
        };

        fileReader.readAsDataURL(fileToLoad);
               }
        }
        (function() {
            document.getElementById("message_form").onsubmit = function() {
                
                post_request();
                
                return false;
            }
        })
        ();
        
        </script>

</body>
</html> 

               
         